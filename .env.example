# =============================================================================
# AumOS Drift Detector â€” Environment Variables
# All variables use the AUMOS_DRIFT_ prefix.
# Copy this file to .env and fill in values for local development.
# Never commit .env to version control.
# =============================================================================

# ---------------------------------------------------------------------------
# Service identity
# ---------------------------------------------------------------------------
AUMOS_DRIFT_SERVICE_NAME=aumos-drift-detector
AUMOS_DRIFT_ENV=development
AUMOS_DRIFT_DEBUG=true
AUMOS_DRIFT_VERSION=0.1.0

# ---------------------------------------------------------------------------
# Database (PostgreSQL via asyncpg)
# ---------------------------------------------------------------------------
AUMOS_DRIFT_DATABASE__URL=postgresql+asyncpg://aumos:aumos_dev@localhost:5432/aumos
AUMOS_DRIFT_DATABASE__POOL_SIZE=10
AUMOS_DRIFT_DATABASE__MAX_OVERFLOW=20
AUMOS_DRIFT_DATABASE__ECHO=false

# ---------------------------------------------------------------------------
# Kafka (confluent-kafka)
# ---------------------------------------------------------------------------
AUMOS_DRIFT_KAFKA__BOOTSTRAP_SERVERS=localhost:9092
AUMOS_DRIFT_KAFKA__CONSUMER_GROUP_ID=aumos-drift-detector
AUMOS_DRIFT_KAFKA__AUTO_OFFSET_RESET=earliest
AUMOS_DRIFT_KAFKA__SECURITY_PROTOCOL=PLAINTEXT

# ---------------------------------------------------------------------------
# Redis (optional caching layer)
# ---------------------------------------------------------------------------
AUMOS_DRIFT_REDIS__URL=redis://localhost:6379/0
AUMOS_DRIFT_REDIS__MAX_CONNECTIONS=20

# ---------------------------------------------------------------------------
# Keycloak (JWT authentication)
# ---------------------------------------------------------------------------
AUMOS_DRIFT_KEYCLOAK__SERVER_URL=http://localhost:8080
AUMOS_DRIFT_KEYCLOAK__REALM=aumos
AUMOS_DRIFT_KEYCLOAK__CLIENT_ID=aumos-drift-detector
AUMOS_DRIFT_KEYCLOAK__CLIENT_SECRET=change-me-in-production

# ---------------------------------------------------------------------------
# Observability
# ---------------------------------------------------------------------------
AUMOS_DRIFT_OBSERVABILITY__OTLP_ENDPOINT=http://localhost:4317
AUMOS_DRIFT_OBSERVABILITY__PROMETHEUS_PORT=9090
AUMOS_DRIFT_OBSERVABILITY__LOG_LEVEL=INFO

# ---------------------------------------------------------------------------
# Statistical drift thresholds (global defaults; per-monitor values override)
# ---------------------------------------------------------------------------

# Kolmogorov-Smirnov p-value threshold (drift if p_value < threshold)
AUMOS_DRIFT_DRIFT_THRESHOLD_KS=0.05

# Population Stability Index (drift if psi > threshold)
AUMOS_DRIFT_DRIFT_THRESHOLD_PSI=0.2

# Chi-squared p-value threshold (drift if p_value < threshold)
AUMOS_DRIFT_DRIFT_THRESHOLD_CHI2=0.05

# Warning level for PSI (alert if psi > warning_threshold and < drift_threshold)
AUMOS_DRIFT_DRIFT_WARNING_THRESHOLD_PSI=0.1

# ---------------------------------------------------------------------------
# ADWIN concept drift detector
# ---------------------------------------------------------------------------
AUMOS_DRIFT_ADWIN_DELTA=0.002
AUMOS_DRIFT_ADWIN_MAX_BUCKETS=5

# ---------------------------------------------------------------------------
# DDM concept drift detector
# ---------------------------------------------------------------------------
AUMOS_DRIFT_DDM_WARNING_LEVEL=2.0
AUMOS_DRIFT_DDM_DRIFT_LEVEL=3.0
AUMOS_DRIFT_DDM_MIN_NUM_INSTANCES=30

# ---------------------------------------------------------------------------
# Retraining trigger
# ---------------------------------------------------------------------------
AUMOS_DRIFT_RETRAINING_TRIGGER_ENABLED=true
AUMOS_DRIFT_RETRAINING_TOPIC=drift.retraining_required
AUMOS_DRIFT_RETRAINING_COOLDOWN_SECONDS=3600

# ---------------------------------------------------------------------------
# Reference data storage (MinIO / S3-compatible)
# ---------------------------------------------------------------------------
AUMOS_DRIFT_MINIO__ENDPOINT=localhost:9000
AUMOS_DRIFT_MINIO__ACCESS_KEY=minioadmin
AUMOS_DRIFT_MINIO__SECRET_KEY=minioadmin
AUMOS_DRIFT_MINIO__BUCKET=aumos-drift-reference
AUMOS_DRIFT_MINIO__SECURE=false
